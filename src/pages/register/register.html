<!--
  Generated template for the RegisterPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>Sign Up</ion-title>
  </ion-navbar>

</ion-header>


<ion-content padding>
  <form (submit)='onSubmit($event)'>
    <ion-list>

      <!-- Name input PS: Do not use 'name' for propriety name cause of bugs -->
      <ion-item>
        <ion-label floating>First Name</ion-label>
        <ion-input type='text' name='firstName'
                   #firstNameInput='ngModel' [(ngModel)]='registerRequest.firstName' required></ion-input>
      </ion-item>
      <!-- Error message displayed if the name is invalid -->
      <ion-item *ngIf='firstNameInput.invalid && firstNameInput.dirty' no-lines>
        <p ion-text color='danger'>First Name is required.</p>
      </ion-item>
      <!-- Username input
       TODO: Test if unique
       -->
      <ion-item>
        <ion-label floating>Username</ion-label>
        <ion-input type='text' name='username'
                   #usernameInput='ngModel' [(ngModel)]='registerRequest.username' required></ion-input>
      </ion-item>
      <ion-item *ngIf='usernameInput.invalid && usernameInput.dirty' no-lines>
        <p ion-text color='danger'>Username is required.</p>
      </ion-item>

      <!-- Password input -->
      <ion-item>
        <ion-label floating>Password</ion-label>
        <ion-input type='password' name='password'
                   #passwordInput='ngModel' [(ngModel)]='registerRequest.password' required></ion-input>
      </ion-item>
      <ion-item *ngIf='passwordInput.invalid && passwordInput.dirty' no-lines>
        <p ion-text color='danger'>Password is required.</p>
      </ion-item>

      <!-- Date of birth input -->
      <ion-item>
        <ion-input type='date' name='birthDate'
                   #birthDateInput='ngModel' [(ngModel)]='registerRequest.birthDate' required></ion-input>
      </ion-item>
      <ion-item *ngIf='birthDateInput.invalid && birthDateInput.dirty' no-lines>
        <p ion-text color='danger'>birthDate is required.</p>
      </ion-item>

      <!-- Gender input -->
      <ion-item>
        <ion-label floating>Gender</ion-label>
        <ion-select name='gender' #genderInput='ngModel' [(ngModel)]='registerRequest.gender'>
          <ion-option value="f">Female</ion-option>
          <ion-option value="m">Male</ion-option>
          <ion-option value="o">Other</ion-option>
        </ion-select>
      </ion-item>
    </ion-list>

    <div padding>

      <!-- Submit button -->
      <button type='submit' [disabled]='form.invalid' ion-button block>Sign Up</button>

      <!-- Error message displayed if the login failed -->
      <p *ngIf='loginError' ion-text color='danger'>Name or password is invalid.</p>

    </div>
    <div padding>
      <!-- Registration link -->
      <button ion-button block [navPush]="loginPage">Back to Login</button>
    </div>
  </form>

</ion-content>
